"use strict";var ESC_KEYCODE=27,button=document.querySelector(".contact-us__button"),popup=document.querySelector(".popup"),overlay=document.querySelector(".overlay"),textInputs=document.querySelectorAll(".input"),body=document.querySelector("body");function existVerticalScroll(){return document.body.offsetHeight>window.innerHeight}function getBodyScrollTop(){return self.pageYOffset||document.documentElement&&document.documentElement.ScrollTop||document.body&&document.body.scrollTop}var onPopupEscPress=function(e){e.keyCode===ESC_KEYCODE&&closePopup()},focusMethod=function(){textInputs[0].focus()},openPopup=function(e){e.preventDefault(),body.dataset.scrollY=getBodyScrollTop(),popup.style.display="block",overlay.style.display="block",popup.querySelector(".popup__inner-content").style.display="block",message.classList.remove("popup__success-message--shown"),focusMethod(),document.addEventListener("keydown",onPopupEscPress),overlay.addEventListener("click",closePopup),existVerticalScroll()&&(body.classList.add("body-lock"),body.style.top="-${body.dataset.scrollY}px")};button.addEventListener("click",openPopup);var closePopup=function(){popup.style.display="none",overlay.style.display="none",document.removeEventListener("keydown",onPopupEscPress),overlay.removeEventListener("click",closePopup),existVerticalScroll()&&(body.classList.remove("body-lock"),window.scrollTo(0,body.dataset.scrollY))},userNameInput=popup.querySelector("#id-name"),emailInput=popup.querySelector("#id-email"),messageInput=popup.querySelector("#id-message"),minLength=2,maxNameLength=25,maxMessageLength=150,mailFormat=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;userNameInput.addEventListener("input",function(e){var t=e.target,o=t.value.split(" ");o.length<2?t.setCustomValidity("Please enter your first and last name"):o[0].length<minLength||o[1].length<minLength?t.setCustomValidity("First name or last name should contain at least 2 symbols"):o[0].length>maxNameLength||o[1].length>maxNameLength?t.setCustomValidity("First name or last name should not contain more than 25 symbols"):t.setCustomValidity("")}),emailInput.addEventListener("input",function(e){var t=e.target;t.value.match(mailFormat)?t.setCustomValidity(""):t.setCustomValidity('Email should look like "somebody@example.com"')}),messageInput.addEventListener("input",function(e){var t=e.target;t.value.length<minLength?t.setCustomValidity("Message should contain at least 2 symbols"):t.value.length>maxMessageLength?t.setCustomValidity("Message should not contain more than 150 symbols"):t.setCustomValidity("")});var form=popup.querySelector(".popup__form"),message=popup.querySelector(".popup__success-message"),upload=function(e,t){var o=new XMLHttpRequest;o.responseType="json",o.addEventListener("load",function(){t(o.response)}),o.open("POST","https://echo.htmlacademy.ru"),o.send(e)};form.addEventListener("submit",function(e){upload(new FormData(form),function(){popup.querySelector(".popup__inner-content").style.display="none",message.classList.add("popup__success-message--shown")}),e.preventDefault()});